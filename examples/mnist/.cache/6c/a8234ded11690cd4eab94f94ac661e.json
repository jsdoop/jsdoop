{"id":"node_modules/@tensorflow/tfjs-layers/dist/variables.js","dependencies":[{"name":"/home/andu/Documents/git/web-dist-edge/examples/mnist/node_modules/@tensorflow/tfjs-layers/dist/variables.js.map","includedInParent":true,"mtime":1550574230668},{"name":"/home/andu/Documents/git/web-dist-edge/examples/mnist/package.json","includedInParent":true,"mtime":1550736445286},{"name":"/home/andu/Documents/git/web-dist-edge/examples/mnist/.babelrc","includedInParent":true,"mtime":1550128877340},{"name":"/home/andu/Documents/git/web-dist-edge/examples/mnist/node_modules/@tensorflow/tfjs-layers/package.json","includedInParent":true,"mtime":1550574230668},{"name":"@tensorflow/tfjs-core","loc":{"line":4,"column":26},"parent":"/home/andu/Documents/git/web-dist-edge/examples/mnist/node_modules/@tensorflow/tfjs-layers/dist/variables.js","resolved":"/home/andu/Documents/git/web-dist-edge/examples/mnist/node_modules/@tensorflow/tfjs-core/dist/tf-core.esm.js"},{"name":"./backend/state","loc":{"line":5,"column":22},"parent":"/home/andu/Documents/git/web-dist-edge/examples/mnist/node_modules/@tensorflow/tfjs-layers/dist/variables.js","resolved":"/home/andu/Documents/git/web-dist-edge/examples/mnist/node_modules/@tensorflow/tfjs-layers/dist/backend/state.js"},{"name":"./common","loc":{"line":6,"column":23},"parent":"/home/andu/Documents/git/web-dist-edge/examples/mnist/node_modules/@tensorflow/tfjs-layers/dist/variables.js","resolved":"/home/andu/Documents/git/web-dist-edge/examples/mnist/node_modules/@tensorflow/tfjs-layers/dist/common.js"},{"name":"./errors","loc":{"line":7,"column":23},"parent":"/home/andu/Documents/git/web-dist-edge/examples/mnist/node_modules/@tensorflow/tfjs-layers/dist/variables.js","resolved":"/home/andu/Documents/git/web-dist-edge/examples/mnist/node_modules/@tensorflow/tfjs-layers/dist/errors.js"}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tfc = require(\"@tensorflow/tfjs-core\");\nvar tfjs_core_1 = require(\"@tensorflow/tfjs-core\");\nvar state_1 = require(\"./backend/state\");\nvar common_1 = require(\"./common\");\nvar errors_1 = require(\"./errors\");\nvar DEFAULT_VARIABLE_NAME_PREFIX = 'Variable';\nvar LayerVariable = (function () {\n    function LayerVariable(val, dtype, name, trainable, constraint) {\n        if (dtype === void 0) { dtype = 'float32'; }\n        if (name === void 0) { name = DEFAULT_VARIABLE_NAME_PREFIX; }\n        if (trainable === void 0) { trainable = true; }\n        if (constraint === void 0) { constraint = null; }\n        this.dtype = dtype == null ? 'float32' : dtype;\n        this.shape = val.shape;\n        this.id = state_1.getNextUniqueTensorId();\n        name = name == null ? DEFAULT_VARIABLE_NAME_PREFIX : name;\n        this.originalName = common_1.getScopedTensorName(name);\n        this.name = common_1.getUniqueTensorName(this.originalName);\n        this.trainable = trainable;\n        this.constraint = constraint;\n        this.val = tfc.variable(val, this.trainable, this.name, this.dtype);\n    }\n    LayerVariable.prototype.read = function () {\n        this.assertNotDisposed();\n        return this.val;\n    };\n    LayerVariable.prototype.write = function (newVal) {\n        this.assertNotDisposed();\n        checkShapesMatch(this.val, newVal);\n        if (this.val.id !== newVal.id) {\n            this.val.assign(newVal);\n            if (this.constraint != null) {\n                this.val.assign(this.constraint.apply(this.val));\n            }\n        }\n        return this;\n    };\n    LayerVariable.prototype.dispose = function () {\n        this.assertNotDisposed();\n        this.val.dispose();\n    };\n    LayerVariable.prototype.assertNotDisposed = function () {\n        if (this.val.isDisposed) {\n            throw new Error(\"LayersVariable \" + this.name + \" is already disposed.\");\n        }\n    };\n    return LayerVariable;\n}());\nexports.LayerVariable = LayerVariable;\nfunction checkShapesMatch(x, y) {\n    if (x.shape.toString() !== y.shape.toString()) {\n        throw new Error('Shape mismatch: ' + JSON.stringify(x.shape) + ' vs. ' +\n            JSON.stringify(y.shape));\n    }\n}\nfunction variable(x, dtype, name, constraint) {\n    return new LayerVariable(x, dtype, name, true, constraint);\n}\nexports.variable = variable;\nfunction zerosVariable(shape, dtype, name) {\n    return new LayerVariable(tfc.zeros(shape), dtype, name);\n}\nexports.zerosVariable = zerosVariable;\nfunction zerosLike(x, dtype, name) {\n    return new LayerVariable(tfc.zerosLike(x), dtype, name);\n}\nexports.zerosLike = zerosLike;\nfunction onesVariable(shape, dtype, name) {\n    var allocated = tfc.ones(shape);\n    return new LayerVariable(allocated, dtype, name);\n}\nexports.onesVariable = onesVariable;\nfunction onesLike(x, dtype, name) {\n    var allocated = tfc.onesLike(x);\n    return new LayerVariable(allocated, dtype, name);\n}\nexports.onesLike = onesLike;\nfunction eyeVariable(size, dtype, name) {\n    return new LayerVariable(tfc.eye(size), dtype, name);\n}\nexports.eyeVariable = eyeVariable;\nfunction randomUniformVariable(shape, minval, maxval, dtype, seed, name) {\n    if (name === void 0) { name = 'randomUniform'; }\n    return new LayerVariable(tfc.randomUniform(shape, minval, maxval, dtype), dtype, name);\n}\nexports.randomUniformVariable = randomUniformVariable;\nfunction truncatedNormalVariable(shape, mean, stddev, dtype, seed, name) {\n    if (mean === void 0) { mean = 0.0; }\n    if (stddev === void 0) { stddev = 1.0; }\n    if (name === void 0) { name = 'truncatedNormal'; }\n    dtype = dtype || 'float32';\n    if (dtype !== 'float32' && dtype !== 'int32') {\n        throw new errors_1.NotImplementedError(\"randomNormal does not support dType \" + dtype + \".\");\n    }\n    return new LayerVariable(tfc.truncatedNormal(shape, mean, stddev, dtype, seed), dtype, name);\n}\nexports.truncatedNormalVariable = truncatedNormalVariable;\nfunction randomNormalVariable(shape, mean, stddev, dtype, seed, name) {\n    if (mean === void 0) { mean = 0.0; }\n    if (stddev === void 0) { stddev = 1.0; }\n    if (name === void 0) { name = 'randomNormal'; }\n    dtype = dtype || 'float32';\n    if (dtype !== 'float32' && dtype !== 'int32') {\n        throw new errors_1.NotImplementedError(\"randomNormalVariable does not support dType \" + dtype + \".\");\n    }\n    return new LayerVariable(tfc.randomNormal(shape, mean, stddev, dtype, seed), dtype, name);\n}\nexports.randomNormalVariable = randomNormalVariable;\nfunction update(x, xNew) {\n    return x.write(xNew);\n}\nexports.update = update;\nfunction updateAdd(x, increment) {\n    return x.write(tfc.add(x.read(), increment));\n}\nexports.updateAdd = updateAdd;\nfunction updateSub(x, decrement) {\n    return x.write(tfc.sub(x.read(), decrement));\n}\nexports.updateSub = updateSub;\nfunction batchGetValue(xs) {\n    return xs.map(function (x) { return x.read(); });\n}\nexports.batchGetValue = batchGetValue;\nfunction batchSetValue(variablesAndValues) {\n    variablesAndValues.forEach(function (variableAndValue) {\n        var variable = variableAndValue[0];\n        variable.write(variableAndValue[1]);\n    });\n}\nexports.batchSetValue = batchSetValue;\nfunction gradients(lossFn, variables) {\n    var variableList = variables.map(function (variable) { return variable.read(); });\n    var valudAndGrads = tfjs_core_1.variableGrads(lossFn, variableList);\n    return variables.map(function (variable) { return valudAndGrads.grads[variable.name]; });\n}\nexports.gradients = gradients;\n","map":{"version":3,"file":"variables.js","sourceRoot":"","sources":["../src/variables.ts"],"names":[],"mappings":"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","sourcesContent":[null]}},"hash":"2502694b66d790291e8934dd19dac9d1","cacheData":{"env":{}}}